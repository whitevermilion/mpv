# mpv 配置文件预设
# 使用方式：在 mpv.conf 中添加 "profile=游戏" 来应用特定预设

# 游戏模式 - 低延迟，高性能
[游戏]
profile-desc=游戏模式：低延迟，高性能
hwdec=auto-safe
video-sync=display-resample
interpolation=no
deband=no
video-latency-hacks=yes
opengl-pbo=yes
gpu-api=vulkan
gpu-context=wayland
# 减少缓存以提高响应速度
cache=no
demuxer-max-bytes=8MiB
demuxer-max-back-bytes=4MiB

# 电影模式 - 高质量，最佳画质
[电影]
profile-desc=电影模式：高质量画质
hwdec=auto-copy-safe
video-sync=display-resample
interpolation=yes
deband=yes
deband-iterations=4
deband-threshold=35
deband-range=16
deband-grain=4
icc-profile-auto=yes
target-colorspace-hint=yes
hdr-compute-peak=yes
tone-mapping=hable
target-peak=100

# 动画模式 - 专门优化动画播放
[动画]
profile-desc=动画模式：专门优化动画
hwdec=auto-safe
video-sync=display-resample
interpolation=yes
deband=yes
deband-iterations=3
deband-threshold=48
deband-range=16
deband-grain=6
icc-profile-auto=yes
# 动画专用着色器预设
glsl-shaders="~~/shaders/Anime4K/glsl/Restore/Anime4K_Restore_CNN_Soft_M.glsl;~~/shaders/Anime4K/glsl/Deblur/Anime4K_Deblur_DoG.glsl"

# 低功耗模式 - 省电，适合笔记本
[低功耗]
profile-desc=低功耗模式：省电优化
hwdec=no
video-sync=audio
interpolation=no
deband=no
icc-profile-auto=no
# 降低CPU使用率
vd-lavc-threads=2
vd-lavc-skiploopfilter=all
vd-lavc-fast=yes
# 降低GPU负载
scale=bilinear
dscale=bilinear
cscale=bilinear

# 网络流媒体模式 - 优化在线视频
[网络流]
profile-desc=网络流媒体模式：优化在线视频
hwdec=auto-safe
video-sync=display-resample
cache=yes
cache-secs=300
demuxer-max-bytes=64MiB
demuxer-max-back-bytes=32MiB
# 网络优化
network-timeout=60
ytdl=yes
ytdl-format=bestvideo[height<=?1080][vcodec!=?vp9]+bestaudio/best

# HDR模式 - 专门优化HDR内容
[HDR]
profile-desc=HDR模式：HDR内容优化
hwdec=auto-copy-safe
target-colorspace-hint=yes
hdr-compute-peak=yes
tone-mapping=hable
target-peak=203
gamut-mapping-mode=relative
icc-profile-auto=yes
# HDR专用着色器
glsl-shaders="~~/shaders/other/PixelClipper.glsl"

# 截图模式 - 高质量截图
[截图]
profile-desc=截图模式：高质量截图
screenshot-format=png
screenshot-png-compression=9
screenshot-png-filter=5
screenshot-tag-colorspace=yes
screenshot-high-bit-depth=yes
screenshot-sw=no
# 确保高质量渲染
scale=lanczos
dscale=mitchell
cscale=mitchell

# 直播模式 - 实时流媒体
[直播]
profile-desc=直播模式：实时流媒体
hwdec=auto-safe
video-sync=display-resample
cache=no
demuxer-max-bytes=2MiB
demuxer-max-back-bytes=1MiB
# 低延迟设置
video-latency-hacks=yes
opengl-pbo=yes
# 网络优化
network-timeout=30
stream-lavf-o=reconnect_streamed=1,reconnect_delay_max=30
